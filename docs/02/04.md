Выгрузить конкретные поля — ещё полдела. Чаще всего данные нужно как-то ограничить: выгрузить информацию за конкретный период или с конкретным условием. Например, получить названия всех треков в жанре рок.

Для таких задач в SQL используют условный оператор `WHERE`. Его указывают после оператора `FROM`:

    SELECT track_id, -- поля для выгрузки
           album_id 
    	   ...
    FROM track -- таблица, из которой выгружают данные
    WHERE track_id = 5; -- условие для среза данных
    

Задавать условия можно с помощью операторов сравнения. Равенство значений указывают знаком `=`, неравенство — знаками `<>`. Вариант для обозначения неравенства `!=`, который используется во многих языках программирования, в PostgreSQL тоже сработает. Остальные операторы сравнения выглядят так:

*   `>` — больше;
*   `<` — меньше;
*   `>=` — больше или равно;
*   `<=` — меньше или равно.

Сравнение с числом записывают просто: `WHERE [поле] < 5`. Но если значение сравнивают с символьным типом, набор символов нужно взять в одинарные кавычки: `WHERE [поле] = 'Иванов'`. Это правило также касается даты и времени: `WHERE [поле] = '2013-07-01'`.

Покажем, как это выглядит на практике. Нужно выгрузить данные о заказах на сумму больше или равно 1.2. Информацию о счетах хранит таблица `invoice`, а поле `total` в таблице содержит данные о сумме заказа. Такой запрос отфильтрует необходимую информацию:

    SELECT *
    /* Нужно выгрузить всю информацию о заказах,
    поэтому поля можно не указывать*/
    FROM invoice
    WHERE total >= 1.2;
    

| invoice\_id | customer\_id | invoice\_date | billing\_address | billing\_city | billing\_state | billing\_country | billing\_postal\_code | total |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 1 | 2 | 2009-01-01 00:00:00 | Theodor-Heuss-Straße 34 | Stuttgart |  | Germany | 70174 | 1.98 |
| 2 | 4 | 2009-01-02 00:00:00 | Ullevålsveien 14 | Oslo |  | Norway | 0171 | 3.96 |
| 3 | 8 | 2009-01-03 00:00:00 | Grétrystraat 63 | Brussels |  | Belgium | 1000 | 5.94 |

* * *

Таблица `paper_clips` хранит данные о заводах по производству скрепок. В поле `factory` указано название завода, а в поле `city` — город, в котором расположен завод. Нужно собрать список заводов, которые находятся в Берлине. Какой запрос выгрузит такую таблицу?

*       SELECT *
        FROM paper_clips
        WHERE factory = Берлин;
        
    
*       SELECT factory
        FROM paper_clips
        WHERE city = Берлин;
        
    
*       SELECT *
        FROM paper_clips
        WHERE city = 'Берлин';
        
    
*       SELECT factory
        FROM paper_clips
        WHERE city = 'Берлин';

Ответы на задания
-----------------

* * *

Таблица `paper_clips` хранит данные о заводах по производству скрепок. В поле `factory` указано название завода, а в поле `city` — город, в котором расположен завод. Нужно собрать список заводов, которые находятся в Берлине. Какой запрос выгрузит такую таблицу?

*   **(-)** `sql SELECT * FROM paper_clips WHERE factory = Берлин;`
    
    *   Такой запрос выгрузит всю таблицу, а нужно только поле `factory`. Условие не сработает, ведь получить срез нужно по значению в поле `city`, которое нужно взять в одинарные кавычки.
*   **(-)** `sql SELECT factory FROM paper_clips WHERE city = Берлин;`
    
    *   Поле `city` хранит символьные значения, значит, в условии нужно использовать одинарные кавычки.
*   **(-)** `sql SELECT * FROM paper_clips WHERE city = 'Берлин';`
    
    *   Условие верное, но результат не совсем тот: нужно выгрузить не всю таблицу, а одно поле `factory`.
*   **(+)** `sql SELECT factory FROM paper_clips WHERE city = 'Берлин';`
    
    *   Чтобы получить список заводов, понадобится не вся таблица, а только поле `factory`. Такой запрос выдаст то что нужно.