## Срезы данных в SQL
### Практика

```sql
-- однострочный комментарий на языке SQL
```

```sql
/* многострочный
комментарий
*/
```

```sql
-- выбор определённых полей из таблицы
SELECT поле_1,
       поле_2,
       поле_3 ...
FROM таблица;
```

```sql
-- выбор всех полей в таблице
SELECT *
FROM таблица;
```

```sql
-- изменение типа данных поля при выгрузке
SELECT CAST(поле AS тип данных)
FROM таблица;
```

```sql
-- срез данных по условию
SELECT поле_1,
       поле_2 -- выбор полей
FROM таблица -- таблица, из которой выгружают данные
WHERE условие; -- условие для среза данных
```

```sql
/*
срез, в котором значение в поле_1 находится
между значением_1 и значением_2 включительно
*/
SELECT *
FROM таблица
WHERE поле_1 BETWEEN значение_1 AND значение_2;
```

```sql
-- срез, в котором все значения поля находятся в списке
SELECT *
FROM таблица
WHERE поле IN ('значение_1','значение_2','значение_3');
```

```sql
-- извлечение части даты
SELECT EXTRACT(часть_даты FROM поле) AS новое_поле_с_датой
FROM таблица;
```

```sql
-- усечение даты до части
SELECT DATE_TRUNC('часть_даты_до_которой_усекаем', поле) AS новое_поле_с_датой
FROM таблица;
```

```sql
-- выбор записей с пропусками в поле
SELECT *
FROM таблица
WHERE поле IS NULL;
```

```sql
-- выбор записей без пропусков в поле
SELECT *
FROM таблица
WHERE поле IS NOT NULL;
```

```sql
-- действия в зависимости от условий
CASE
    WHEN условие_1 THEN результат_1
    WHEN условие_2 THEN результат_2
    WHEN условие_3 THEN результат_3
    ELSE результат_4
END;
```

### Теория

**База данных** — это хранилище структурированной информации.  
**Реляционные базы данных** — базы, в которых данные представлены в виде связанных таблиц.  
**СУБД (система управления базами данных)** — это комплекс программ, который позволяет создать базу данных, наполнить её новыми таблицами, отобразить содержимое, редактировать существующие таблицы.  
**Таблица** — это совокупность строк и столбцов.  
**Поле** — столбец таблицы, обозначающий характеристику объекта и имеющий уникальное имя и характерный тип данных.  
**Запись** — строка таблицы, содержащая информацию об одном объекте.  
**Ячейка** — место пересечения строки и столбца.  
**Первичный ключ** — поле или группа полей, использующееся для однозначного определения записи. Все значения первичного ключа уникальны.  
**SQL** — язык программирования, предназначенный для управления данными в реляционной базе.  
**Запрос** — это сформулированное в соответствии с синтаксисом SQL требование, в котором объявляют, какие данные выбрать, и как именно их обработать.


## Агрегирующие функции. Группировка и сортировка данных
### Практика

```sql
SELECT
    COUNT(*) AS total_records, -- возвращает число записей в таблице
    COUNT(column) AS total_column_records, -- возвращает число записей в поле column
    COUNT(DISTINCT column) AS unique_column_values, -- возвращает количество уникальных значений в поле column
    SUM(column) AS total_sum, -- сумма значений в поле
    AVG(column) AS average_value, -- среднее значений в поле
    MIN(column) AS min_value, -- минимум значений в поле
    MAX(column) AS max_value -- максимум значений в поле
FROM таблица;
```

```sql
-- Группировка данных
SELECT
    поле_1,
    поле_2,
    поле_3,
    АГРЕГИРУЮЩАЯ_ФУНКЦИЯ(поле) AS here_you_are
FROM таблица
GROUP BY поле_1;
```

```sql
-- Сортировка данных
SELECT
    поле_1,
    поле_2,
    поле_3,
    АГРЕГИРУЮЩАЯ_ФУНКЦИЯ(поле) AS here_you_are
FROM таблица
ORDER BY поле_1 ASC, -- сортировка по возрастанию
         поле_2 DESC, -- сортировка по убыванию
         поле_3 ASC; -- сортировка по возрастанию
```

```sql
-- Срез после группировки
SELECT
    поле_1,
    поле_2,
    поле_3,
    АГРЕГИРУЮЩАЯ_ФУНКЦИЯ(поле) AS here_you_are
FROM таблица
GROUP BY поле_1
HAVING here_you_are > n;
```